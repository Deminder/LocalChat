<div class="main-column" *ngIf="conversationId$ | async as cid">
  <app-message-list
    class="list"
    cdkScrollable
    [messages]="conversationMessages$ | async"
    [selfUserId]="selfUserId$ | async"
    [memberDict]="memberEntites$ | async"
    [showSpinner]="loadingMoreMessages$ | async"
    [search]="messageSearch$ | async"
    [highlight]="searchHighlight"
    (lengthUpdate)="keepScrollRelativeToBottom()"
    (delete)="deleteMessage(cid, $event)"
    (edit)="editMessage(cid, $event)"
    (searchTopOffsets)="updateSearchTopOffsets($event)"
    (searchSize)="updateSearchSize($event)"
  ></app-message-list>
  <app-writer
    class="writer shaded-background"
    [member]="selfMember$ | async"
    (send)="sendMessage(cid, $event)"
    (hidden)="keepScrollRelativeToBottom()"
  ></app-writer>
</div>
