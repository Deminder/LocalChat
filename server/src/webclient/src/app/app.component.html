<mat-toolbar>
  <button
    mat-icon-button
    (click)="sidenav.toggle()"
    aria-label="Toggle Sidenav"
  >
    <mat-icon>menu</mat-icon>
  </button>
  <span>{{ toolbarTitle$ | async }}</span>
  <span class="example-spacer"></span>

  <span>{{ selfName$ | async }}</span>
  <ng-template [ngIf]="isSettingsOpen$ | async">
    <button mat-icon-button aria-label="Back" (click)="back()">
      <mat-icon>arrow_back</mat-icon>
    </button>
  </ng-template>
  <ng-template [ngIf]="!(isSettingsOpen$ | async)">
    <button mat-icon-button aria-label="Open settings" routerLink="/settings">
      <mat-icon>settings</mat-icon>
    </button>
  </ng-template>
</mat-toolbar>

<app-sidenav
  #sidenav
  [(opened)]="sidenavOpen"
  [conversationId]="conversationId$ | async"
  [conversations]="conversations$ | async"
>
  <mat-progress-bar
    *ngIf="isProgressActive$ | async"
    mode="query"
  ></mat-progress-bar>
  <router-outlet></router-outlet>
</app-sidenav>
